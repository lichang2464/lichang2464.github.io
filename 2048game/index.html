<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<title>2048</title>
		<link rel="stylesheet" href="css/2048.css" />
		<script type="text/javascript" src="js/jquery-3.0.0.js" ></script>
		<script type="text/javascript" src="js/support.js" ></script>
		<script type="text/javascript" src="js/animation.js" ></script>
		<script type="text/javascript" src="js/main.js" ></script>
		<script type="text/javascript" src="js/game.js" ></script>
				<script>document.addEventListener('touchmove',function(ev){
ev.preventDefault();
},{passive:false});
</script>
	</head>
	<body id="gameBody">
		<header>
			<p class="text" style="color: #ed3073;font-size: 75px"><a href="../index.html" style="color: #ed3073;font-size: 75px;text-decoration:none;">你已经爱我</a>
				<span id="span_dt_dt"></span>
			</p>
			<script language="javascript">
				function show_date_time() {
					window.setTimeout("show_date_time()", 1000);
					BirthDay = new Date("08/24/2018 22:23:52");
					today = new Date();
					timeold = (today.getTime() - BirthDay.getTime());
					sectimeold = timeold / 1000
					secondsold = Math.floor(sectimeold);
					msPerDay = 24 * 60 * 60 * 1000
					e_daysold = timeold / msPerDay
					daysold = Math.floor(e_daysold);
					e_hrsold = (e_daysold - daysold) * 24;
					hrsold = Math.floor(e_hrsold);
					e_minsold = (e_hrsold - hrsold) * 60;
					minsold = Math.floor((e_hrsold - hrsold) * 60);
					seconds = Math.floor((e_minsold - minsold) * 60);
					span_dt_dt.innerHTML = daysold + " 天 " + hrsold + " 小时 " + minsold + " 分 " + seconds + " 秒了";
				}
				show_date_time();
			</script>
			<a href="javascript:newgame();" id="newgamebutton">新游戏 </a>
			<p style="color: palevioletred"><span style="color: red">❤</span>宝贝得分: <span id="score" style="color: red">0</span></p>
		</header>
		<div id="grid-container">
			<div id="grid-cell-0-0" class="grid-cell"></div>
			<div id="grid-cell-0-1" class="grid-cell"></div>
			<div id="grid-cell-0-2" class="grid-cell"></div>
			<div id="grid-cell-0-3" class="grid-cell"></div>
			<div id="grid-cell-1-0" class="grid-cell"></div>
			<div id="grid-cell-1-1" class="grid-cell"></div>
			<div id="grid-cell-1-2" class="grid-cell"></div>
			<div id="grid-cell-1-3" class="grid-cell"></div>
			<div id="grid-cell-2-0" class="grid-cell"></div>
			<div id="grid-cell-2-1" class="grid-cell"></div>
			<div id="grid-cell-2-2" class="grid-cell"></div>
			<div id="grid-cell-2-3" class="grid-cell"></div>
			<div id="grid-cell-3-0" class="grid-cell"></div>
			<div id="grid-cell-3-1" class="grid-cell"></div>
			<div id="grid-cell-3-2" class="grid-cell"></div>
			<div id="grid-cell-3-3" class="grid-cell"></div>
			
		</div>
		<div style="position:absolute;left:0px;bottom:0px;">
			<!-- 隐藏播放条：删除ontrols="controls"部分 -->
			<audio autoplay="autopaly" loop="loop"  controls="controls" id="audios">
				<source src="../music/G.E.M.邓紫棋%20-%20喜欢你.mp3" type="audio/mp3" />
			</audio>
		</div>
		<script>
			var music = document.getElementById('video');
			var state = 0;
			document.addEventListener('touchstart', function(){
				if(state==0){
					music.play();
					state=1;
				}
			}, false);
			document.addEventListener("WeixinJSBridgeReady", function () {
				music.play();
			}, false);
			//循环播放
			music.onended = function () {
				music.load();
				music.play();
			}
		</script>
		
	</body>
	
	
	<script>
	</script>
	<script>
	    // 手机屏幕划动触发
	    (function () {
	      mobilwmtouch(document.getElementById('gameBody'));
	      document
	        .getElementById('gameBody')
	        .addEventListener('touright', function (e) {
	          e.preventDefault();
		　　　			if (moveRight()) {
							setTimeout("generateOneNumber()", 100);
		 					setTimeout("isgameover()", 150);
							}
	        });
	      document
	        .getElementById('gameBody')
	        .addEventListener('touleft', function (e) {
		　　　			if (moveLeft()) {
							setTimeout("generateOneNumber()", 100);
		 					setTimeout("isgameover()", 150);
							}
	        });
	      document
	        .getElementById('gameBody')
	        .addEventListener('toudown', function (e) {
		　　　			if (moveDown()) {
							setTimeout("generateOneNumber()", 100);
		 					setTimeout("isgameover()", 150);
							}
	        });
	      document
	        .getElementById('gameBody')
	        .addEventListener('touup', function (e) {
		　　　			if (moveUp()()) {
							setTimeout("generateOneNumber()", 100);
		 					setTimeout("isgameover()", 150);
							}
	        });
	
	      function mobilwmtouch(obj) {
	        var stoux, stouy;
	        var etoux, etouy;
	        var xdire, ydire;
	        obj.addEventListener(
	          'touchstart',
	          function (e) {
	            stoux = e.targetTouches[0].clientX;
	            stouy = e.targetTouches[0].clientY;
	            //console.log(stoux);
	          },
	          false
	        );
	        obj.addEventListener(
	          'touchend',
	          function (e) {
	            etoux = e.changedTouches[0].clientX;
	            etouy = e.changedTouches[0].clientY;
	            xdire = etoux - stoux;
	            ydire = etouy - stouy;
	            chazhi = Math.abs(xdire) - Math.abs(ydire);
	            //console.log(ydire);
	            if (xdire > 0 && chazhi > 0) {
	              console.log('right');
	              //alert(evenzc('touright',alerts));
	              obj.dispatchEvent(evenzc('touright'));
	            } else if (ydire > 0 && chazhi < 0) {
	              console.log('down');
	              obj.dispatchEvent(evenzc('toudown'));
	            } else if (xdire < 0 && chazhi > 0) {
	              console.log('left');
	              obj.dispatchEvent(evenzc('touleft'));
	            } else if (ydire < 0 && chazhi < 0) {
	              console.log('up');
	              obj.dispatchEvent(evenzc('touup'));
	            }
	          },
	          false
	        );
	
	        function evenzc(eve) {
	          if (typeof document.CustomEvent === 'function') {
	            this.event = new document.CustomEvent(eve, {
	              //自定义事件名称
	              bubbles: false, //是否冒泡
	              cancelable: false, //是否可以停止捕获
	            });
	            if (!document['evetself' + eve]) {
	              document['evetself' + eve] = this.event;
	            }
	          } else if (typeof document.createEvent === 'function') {
	            this.event = document.createEvent('HTMLEvents');
	            this.event.initEvent(eve, false, false);
	            if (!document['evetself' + eve]) {
	              document['evetself' + eve] = this.event;
	            }
	          } else {
	            return false;
	          }
	
	          return document['evetself' + eve];
	        }
	      }
	    })();
	  </script>
	
	
	
	
</html>

